modules:
  - docassemble.base.util
  - docassemble.base.core
---
include: 
  - bad_conditions.yml
  - final_questions.yml
  - rent.yml
  - stay.yml
  - vacate.yml
---
code: |
  seen_case_intro
  processed_rent
  processed_bad_conditions
  if client.rent.should_be_reduced:
    if client.owed.waive_rent:
      client.owed.reduction = client.owed.rent
  if client.wants_to_stay:
    processed_stay
  else:
    processed_vacate
  worksheet_complete = True
---
question: |
  Welcome ${ client.name }.
subquestion: |
  Now that we have some basic information about you,
  I we would like to ask some questions about your case
field: seen_case_intro
section: About your case
---
question: |
  Should the rent you owe be reduced?
yesno: client.rent.should_be_reduced
---
question: |
  How much should your rent be reduced?
subquestion: |
  This should be up to the rent you owed, which is $${ client.owed.rent }
fields:
  - no label: client.owed.reduction
    min: 0
    max: ${ client.owed.rent }
    js hide if: |
      val("client.owed.waive_rent") == true
  - I should pay no rent: client.owed.waive_rent
    datatype: yesnowide
---
question: |
  Do you want to stay in your home?
yesno: client.wants_to_stay
section: Goals